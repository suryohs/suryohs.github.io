<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aplikasi Tes — Contoh 3 Soal (Asli)</title>
  <style>
    :root{
      --bg:#0f172a; --card:#0b1220; --accent:#06b6d4; --muted:#94a3b8;
      --success:#10b981; --danger:#ef4444;
    }
    *{box-sizing:border-box}
    body{
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin:0; background:linear-gradient(180deg,#0f172a 0%, #081024 100%);
      color:#e6eef8; min-height:100vh; display:flex; align-items:center; justify-content:center;
      padding:24px;
    }
    .card{
      width:100%; max-width:900px; background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:14px; padding:22px; box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      border:1px solid rgba(255,255,255,0.03);
    }
    header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px}
    header h1{font-size:1.1rem; margin:0; color:#e6eef8}
    .meta{color:var(--muted); font-size:0.9rem}
    .progress{height:10px; background:rgba(255,255,255,0.04); border-radius:999px; overflow:hidden; margin:14px 0}
    .progress > i{display:block; height:100%; background:linear-gradient(90deg,var(--accent),#3b82f6); width:0%}
    .question-box{background:rgba(255,255,255,0.02); padding:18px; border-radius:10px; border:1px solid rgba(255,255,255,0.02)}
    .qtext{font-size:1rem; line-height:1.5; color:#e6eef8; margin-bottom:12px; white-space:pre-wrap}
    .options{display:grid; grid-template-columns:1fr; gap:10px}
    .opt{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
      border:1px solid rgba(255,255,255,0.03);
      padding:12px; border-radius:8px; cursor:pointer; transition:transform .08s, box-shadow .12s;
      color:#dbeafe;
    }
    .opt:hover{transform:translateY(-3px); box-shadow:0 8px 28px rgba(2,6,23,0.5)}
    .opt.disabled{opacity:0.7; cursor:default}
    .opt.correct{background:linear-gradient(90deg, rgba(16,185,129,0.12), rgba(16,185,129,0.06)); border-color:rgba(16,185,129,0.6); color:#bbf7d0}
    .opt.wrong{background:linear-gradient(90deg, rgba(239,68,68,0.08), rgba(239,68,68,0.04)); border-color:rgba(239,68,68,0.6); color:#fecaca}
    .controls{display:flex; gap:10px; margin-top:14px; align-items:center}
    button.btn{
      background:linear-gradient(180deg,var(--accent),#2563eb); color:#fff; border:none; padding:10px 14px; border-radius:9px; cursor:pointer;
      font-weight:600;
    }
    button.ghost{background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted)}
    .feedback{margin-top:12px; font-size:0.95rem}
    .explanation{
      margin-top:12px; background:rgba(255,255,255,0.02); padding:12px; border-radius:8px; color:#cfe9ff;
      border:1px dashed rgba(255,255,255,0.03); white-space:pre-wrap;
    }
    .score{font-size:1.05rem; color:#e6eef8}
    footer{margin-top:16px; text-align:right; color:var(--muted); font-size:0.85rem}
    @media (min-width:720px){
      .options{grid-template-columns:1fr 1fr}
    }
  </style>
</head>
<body>
  <div class="card" role="application" aria-labelledby="title">
    <header>
      <div>
        <h1 id="title">Aplikasi Tes Matematika — Contoh 3 Soal (Asli)</h1>
        <div class="meta">Soal sesuai teks asli dari dokumen. Setelah menjawab akan tampil pembahasan asli.</div>
      </div>
      <div style="text-align:right">
        <div class="meta">Soal acak • Opsi acak</div>
        <div id="qcount" class="meta">Soal 0 / 3</div>
      </div>
    </header>

    <div class="progress" aria-hidden><i id="progress-bar"></i></div>

    <div class="question-box">
      <div class="qtext" id="question-text">Memuat soal…</div>

      <div class="options" id="options"></div>

      <div class="feedback" id="feedback" aria-live="polite"></div>

      <div class="explanation" id="explanation" style="display:none"></div>

      <div class="controls">
        <button class="btn" id="nextBtn" style="display:none">Soal Berikutnya</button>
        <button class="ghost" id="restart">Ulang Tes</button>
        <div style="flex:1"></div>
        <div id="scoreBox" class="score"></div>
      </div>
    </div>

    <footer>Versi contoh — 3 soal. Jika tampil cocok, saya lanjutkan masukkan semua 20 soal.</footer>
  </div>

<script>
/*
  Soal & pembahasan diambil langsung dari file (teks asli).
  Di sini dipakai 3 soal: nomor 1,2,3 dari dokumen.
  Opsi dibuat otomatis: jawaban benar + 3 pengecoh.
  Soal & opsi diacak pada setiap startQuiz().
*/

const rawQuestions = [
  {
    id: 1,
    question:
`Suatu bilangan asli dua digit disebut bilangan Komri apabila:

Bilangan tersebut habis dibagi oleh 4,

Jika digitnya ditukar, maka hasilnya adalah bilangan prima dua digit.

Sebagai contoh,  merupakan bilangan Komri karena  habis dibagi  dan  merupakan bilangan prima dua digit. Banyaknya bilangan Komri adalah…`,
    // jawaban benar (mengacu pada pembahasan dokumen — benar: 2)
    answer: "2",
    pembahasan:
`Dengan pengecekan terstruktur, mulai dari  didapat bahwa bilangan yang memenuhi dua syarat diatas hanyalah  dan .
Jadi, banyaknya bilangan Komri ada sebanyak  bilangan.`
  },

  {
    id: 2,
    question:
`Ridho, Komri, dan Ikhsan adalah orang yang memiliki hobi yang sama, yaitu catur. Karena kesibukan masing-masing, Ridho berlatih catur setiap 4 hari sekali, Komri berlatih catur setiap 5 hari sekali, sedangkan Ikhsan berlatih catur setiap 6 hari sekali. Jika pada tanggal 17 Juli 2025, Ridho dan Komri bersama-sama berlatih catur sedangkan Ikhsan baru akan berlatih pada tanggal 19 Juli 2025, maka pada Bulan Agustus tahun 2026, mereka akan berlatih bersama pada tanggal …`,
    answer: "1",
    pembahasan:
`Perhatikan bahwa mereka bertiga akan berlatih bersama pada tanggal 6 Agustus 2025. Karena  maka mereka akan berlatih bersama-sama lagi setiap 60 hari.
Perhatikan bahwa dalam satu tahun, terdapat 365 hari dan . Sehingga mereka bertiga akan berlatih bersama lagi 5 hari sebelum tanggal 6 Agustus 2026, yaitu 1 Agustus 2026.
Jadi, pada Bulan Agustus tahun 2026, mereka akan berlatih bersama pada tanggal 1.`
  },

  {
    id: 3,
    question:
`Faktor prima terbesar dari  adalah…`,
    // from context, number is 2310 => faktor prima terbesar = 11
    answer: "11",
    pembahasan:
`Perhatikan bahwa 
Jadi, faktor prima terbesarnya adalah .`
  }
];

// helper: shuffle array in-place
function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

// build options: correct plus 3 distractors.
// For numeric answers we generate numeric distractors near the true value.
// For safety, convert answer to string and try to parse int.
function makeOptionsFor(q){
  const correct = String(q.answer);
  let opts = [correct];

  // try numeric distractors when answer is integer
  const n = parseInt(correct);
  if(!isNaN(n)){
    const deltas = [-6,-4,-3,-2,-1,1,2,3,4,5,6,7,8];
    shuffle(deltas);
    let i=0;
    while(opts.length < 4 && i<deltas.length){
      const candidate = String(n + deltas[i]);
      if(candidate !== correct && !opts.includes(candidate) && (n + deltas[i])>0){
        opts.push(candidate);
      }
      i++;
    }
    // if still less than 4, add some other numbers
    let extra = 10;
    while(opts.length < 4){
      const c = String(Math.max(1, Math.floor(Math.random()*100)));
      if(!opts.includes(c)) opts.push(c);
      extra--;
      if(extra<0) break;
    }
  } else {
    // non-numeric: create dummy alts
    while(opts.length < 4){
      const c = correct + String(Math.floor(Math.random()*9)+1);
      if(!opts.includes(c)) opts.push(c);
    }
  }

  return shuffle(opts);
}

// application state
let questions = []; // will hold shuffled questions with options
let currentIndex = 0;
let score = 0;
const total = 3;

const qText = document.getElementById('question-text');
const optsDiv = document.getElementById('options');
const progressBar = document.getElementById('progress-bar');
const qcount = document.getElementById('qcount');
const nextBtn = document.getElementById('nextBtn');
const restartBtn = document.getElementById('restart');
const feedback = document.getElementById('feedback');
const explanation = document.getElementById('explanation');
const scoreBox = document.getElementById('scoreBox');

function startQuiz(){
  // prepare questions
  questions = rawQuestions.map(q=>{
    return {
      ...q,
      options: makeOptionsFor(q)
    };
  });
  // randomize order of questions
  shuffle(questions);
  currentIndex = 0;
  score = 0;
  updateProgress();
  renderQuestion();
  explanation.style.display = 'none';
  feedback.innerText = '';
  scoreBox.innerText = `Skor: ${score}/${total}`;
  nextBtn.style.display = 'none';
}
function updateProgress(){
  qcount.innerText = `Soal ${currentIndex+1} / ${total}`;
  const pct = Math.round((currentIndex/total)*100);
  progressBar.style.width = pct + '%';
}
function renderQuestion(){
  const q = questions[currentIndex];
  qText.innerText = `Soal ${currentIndex+1}:\n\n` + q.question;
  optsDiv.innerHTML = '';
  explanation.style.display = 'none';
  feedback.innerText = '';

  // create option elements
  q.options.forEach(optText=>{
    const d = document.createElement('div');
    d.className = 'opt';
    d.tabIndex = 0;
    d.setAttribute('role','button');
    d.innerText = optText;
    d.onclick = ()=>selectOption(d, optText, q);
    d.onkeydown = (e)=>{ if(e.key === 'Enter' || e.key === ' ') selectOption(d, optText, q); };
    optsDiv.appendChild(d);
  });

  updateProgress();
  nextBtn.style.display = 'none';
}
function disableOptions(){
  const all = document.querySelectorAll('.opt');
  all.forEach(o=>{
    o.classList.add('disabled');
    o.onclick = null;
  });
}
function selectOption(elem, chosen, q){
  disableOptions();
  const correct = String(q.answer);
  if(chosen === correct){
    elem.classList.add('correct');
    feedback.innerHTML = `<strong style="color: #bbf7d0">Benar.</strong>`;
    score++;
  } else {
    elem.classList.add('wrong');
    // highlight correct option
    const all = document.querySelectorAll('.opt');
    all.forEach(o=>{
      if(o.innerText === correct) o.classList.add('correct');
    });
    feedback.innerHTML = `<strong style="color: #fecaca">Salah.</strong> Jawaban benar: <strong>${correct}</strong>`;
  }

  // show pembahasan (teks asli dari dokumen)
  explanation.style.display = 'block';
  explanation.innerText = "Pembahasan (teks asli dari dokumen):\n\n" + q.pembahasan;

  scoreBox.innerText = `Skor: ${score}/${total}`;
  nextBtn.style.display = 'inline-block';
}

nextBtn.onclick = ()=>{
  currentIndex++;
  if(currentIndex >= total){
    // selesai seluruh soal
    qText.innerText = "Tes selesai.";
    optsDiv.innerHTML = "";
    feedback.innerHTML = `<strong>Hasil: ${score} / ${total}</strong>`;
    explanation.style.display = 'block';
    explanation.innerText = "Sudah selesai. Tekan 'Ulang Tes' untuk mencoba lagi.";
    progressBar.style.width = '100%';
    qcount.innerText = `Selesai • ${total}/${total}`;
    nextBtn.style.display = 'none';
  } else {
    renderQuestion();
  }
};

restartBtn.onclick = ()=>{
  startQuiz();
};

// start immediately
startQuiz();

</script>
</body>
</html>
